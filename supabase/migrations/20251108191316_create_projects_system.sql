-- Migration File: 20251108191316_create_projects_system.sql\n\n-- Create projects table\nCREATE TABLE projects (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    created_at TIMESTAMP DEFAULT NOW(),\n    updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Create hypotheses table\nCREATE TABLE hypotheses (\n    id SERIAL PRIMARY KEY,\n    project_id INT REFERENCES projects(id) ON DELETE CASCADE,\n    hypothesis_text TEXT,\n    created_at TIMESTAMP DEFAULT NOW(),\n    updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Create experiments table\nCREATE TABLE experiments (\n    id SERIAL PRIMARY KEY,\n    hypothesis_id INT REFERENCES hypotheses(id) ON DELETE CASCADE,\n    experiment_description TEXT,\n    created_at TIMESTAMP DEFAULT NOW(),\n    updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Create interviews table\nCREATE TABLE interviews (\n    id SERIAL PRIMARY KEY,\n    experiment_id INT REFERENCES experiments(id) ON DELETE CASCADE,\n    interview_notes TEXT,\n    created_at TIMESTAMP DEFAULT NOW(),\n    updated_at TIMESTAMP DEFAULT NOW()\n);\n\n-- Enable Row Level Security\nALTER TABLE projects ENABLE ROW LEVEL SECURITY;\nALTER TABLE hypotheses ENABLE ROW LEVEL SECURITY;\nALTER TABLE experiments ENABLE ROW LEVEL SECURITY;\nALTER TABLE interviews ENABLE ROW LEVEL SECURITY;\n\n-- Create policies for projects\nCREATE POLICY select_projects ON projects FOR SELECT TO authenticated;\nCREATE POLICY insert_projects ON projects FOR INSERT TO authenticated;\nCREATE POLICY update_projects ON projects FOR UPDATE TO authenticated;\nCREATE POLICY delete_projects ON projects FOR DELETE TO authenticated;\n\n-- Create policies for hypotheses\nCREATE POLICY select_hypotheses ON hypotheses FOR SELECT TO authenticated;\nCREATE POLICY insert_hypotheses ON hypotheses FOR INSERT TO authenticated;\nCREATE POLICY update_hypotheses ON hypotheses FOR UPDATE TO authenticated;\nCREATE POLICY delete_hypotheses ON hypotheses FOR DELETE TO authenticated;\n\n-- Create policies for experiments\nCREATE POLICY select_experiments ON experiments FOR SELECT TO authenticated;\nCREATE POLICY insert_experiments ON experiments FOR INSERT TO authenticated;\nCREATE POLICY update_experiments ON experiments FOR UPDATE TO authenticated;\nCREATE POLICY delete_experiments ON experiments FOR DELETE TO authenticated;\n\n-- Create policies for interviews\nCREATE POLICY select_interviews ON interviews FOR SELECT TO authenticated;\nCREATE POLICY insert_interviews ON interviews FOR INSERT TO authenticated;\nCREATE POLICY update_interviews ON interviews FOR UPDATE TO authenticated;\nCREATE POLICY delete_interviews ON interviews FOR DELETE TO authenticated;\n\n